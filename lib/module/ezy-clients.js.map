{"version":3,"sources":["ezy-clients.js"],"names":["EzyClient","DeviceEventEmitter","NativeEventEmitter","Platform","NativeModules","EzyClientProxy","EzyClients","constructor","clients","defaultClientName","addEventListeners","getInstance","instance","newClient","config","callback","client","addClient","name","newDefaultClient","getClient","clientName","getDefaultClient","OS","clientEmitter","addListener","params","eventType","data","handleEvent","command","handleData"],"mappings":"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","sourcesContent":["import EzyClient from './ezy-client'\nimport { DeviceEventEmitter, NativeEventEmitter, Platform, NativeModules } from 'react-native';\n\nconst { EzyClientProxy } = NativeModules;\n\nclass EzyClients {\n    constructor() {\n        this.clients = {};\n        this.defaultClientName = \"\";\n        this.addEventListeners();\n    }\n\n    static getInstance() {\n        if (!EzyClients.instance) {\n            EzyClients.instance = new EzyClients();\n        }\n        return EzyClients.instance;\n    }\n\n    newClient(config, callback) {\n        new EzyClient(config, client => {\n            this.addClient(client);\n            if(this.defaultClientName == \"\")\n                this.defaultClientName = client.name;\n            if(callback)\n                callback(client);\n        });\n    }\n\n    newDefaultClient(config, callback) {\n        this.newClient(config, client => {\n            this.defaultClientName = client.name;\n            if(callback)\n                callback(client);\n        });\n    }\n\n    addClient(client) {\n        this.clients[client.name] = client;\n    }\n\n    getClient(clientName) {\n        return this.clients[clientName];\n    }\n\n    getDefaultClient() {\n        return this.clients[this.defaultClientName];\n    }\n\n    addEventListeners() {\n        if(Platform.OS == 'ios') {\n            const clientEmitter = new NativeEventEmitter(EzyClientProxy);\n            clientEmitter.addListener('ezy.event', params => {\n                var client = this.getClient(params.clientName);\n                var eventType = params.eventType;\n                var data = params.data;\n                client.handleEvent(eventType, data);\n            });\n            clientEmitter.addListener('ezy.data', params => {\n                var client = this.getClient(params.clientName);\n                var command = params.command;\n                var data = params.data;\n                client.handleData(command, data);\n            });\n        }\n        else {\n            DeviceEventEmitter.addListener('ezy.event', params => {\n                var client = this.getClient(params.clientName);\n                var eventType = params.eventType;\n                var data = params.data;\n                client.handleEvent(eventType, data);\n            });\n            DeviceEventEmitter.addListener('ezy.data', params => {\n                var client = this.getClient(params.clientName);\n                var command = params.command;\n                var data = params.data;\n                client.handleData(command, data);\n            });\n        }\n    }    \n}\n\nexport default EzyClients"]}