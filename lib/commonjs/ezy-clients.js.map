{"version":3,"sources":["ezy-clients.js"],"names":["EzyClientProxy","NativeModules","EzyClients","constructor","clients","defaultClientName","addEventListeners","getInstance","instance","newClient","config","callback","EzyClient","client","addClient","name","newDefaultClient","getClient","clientName","getDefaultClient","Platform","OS","clientEmitter","NativeEventEmitter","addListener","params","eventType","data","handleEvent","command","handleData","DeviceEventEmitter"],"mappings":"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","sourcesContent":["import EzyClient from './ezy-client';\nimport {\n    DeviceEventEmitter,\n    NativeEventEmitter,\n    Platform,\n    NativeModules,\n} from 'react-native';\n\nconst { EzyClientProxy } = NativeModules;\n\nclass EzyClients {\n    constructor() {\n        this.clients = {};\n        this.defaultClientName = '';\n        this.addEventListeners();\n    }\n\n    static getInstance() {\n        if (!EzyClients.instance) {\n            EzyClients.instance = new EzyClients();\n        }\n        return EzyClients.instance;\n    }\n\n    newClient(config, callback) {\n        new EzyClient(config, (client) => {\n            this.addClient(client);\n            if (this.defaultClientName === '')\n                this.defaultClientName = client.name;\n            if (callback) callback(client);\n        });\n    }\n\n    newDefaultClient(config, callback) {\n        this.newClient(config, (client) => {\n            this.defaultClientName = client.name;\n            if (callback) callback(client);\n        });\n    }\n\n    addClient(client) {\n        this.clients[client.name] = client;\n    }\n\n    getClient(clientName) {\n        return this.clients[clientName];\n    }\n\n    getDefaultClient() {\n        return this.clients[this.defaultClientName];\n    }\n\n    addEventListeners() {\n        if (Platform.OS === 'ios') {\n            const clientEmitter = new NativeEventEmitter(EzyClientProxy);\n            clientEmitter.addListener('ezy.event', (params) => {\n                var client = this.getClient(params.clientName);\n                var eventType = params.eventType;\n                var data = params.data;\n                client.handleEvent(eventType, data);\n            });\n            clientEmitter.addListener('ezy.data', (params) => {\n                var client = this.getClient(params.clientName);\n                var command = params.command;\n                var data = params.data;\n                client.handleData(command, data);\n            });\n        } else {\n            DeviceEventEmitter.addListener('ezy.event', (params) => {\n                var client = this.getClient(params.clientName);\n                var eventType = params.eventType;\n                var data = params.data;\n                client.handleEvent(eventType, data);\n            });\n            DeviceEventEmitter.addListener('ezy.data', (params) => {\n                var client = this.getClient(params.clientName);\n                var command = params.command;\n                var data = params.data;\n                client.handleData(command, data);\n            });\n        }\n    }\n}\n\nexport default EzyClients;\n"]}